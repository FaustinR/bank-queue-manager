/* Mobile Responsive Styles */

/* Ensure proper viewport handling */
html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
}

/* Mobile-first approach */
@media (max-width: 768px) {
    /* Admin container adjustments */
    .admin-container {
        flex-direction: column;
    }
    
    .sidebar {
        width: 100%;
        height: auto;
        position: relative;
        transform: none;
    }
    
    .sidebar.collapsed {
        height: 60px;
        overflow: hidden;
    }
    
    .sidebar-toggle {
        display: block;
        position: absolute;
        top: 15px;
        right: 15px;
        z-index: 1000;
    }
    
    .main-content {
        margin-left: 0;
        padding: 10px;
    }
    
    /* Header adjustments */
    .content-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .user-info {
        font-size: 12px;
    }
    
    /* Inbox specific mobile styles */
    .inbox-container {
        flex-direction: column;
        height: calc(100vh - 120px);
    }
    
    .inbox-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid #ddd;
        padding: 10px;
    }
    
    .inbox-content {
        flex-direction: column;
        height: auto;
    }
    
    .message-list {
        height: 300px;
        border-right: none;
        border-bottom: 1px solid #ddd;
    }
    
    .message-view {
        height: auto;
        min-height: 200px;
    }
    
    /* Message group headers */
    .message-group-header {
        padding: 10px;
        font-size: 14px;
    }
    
    .message-item {
        padding: 10px;
        font-size: 13px;
    }
    
    /* Compose modal mobile adjustments */
    .modal-content {
        width: 95%;
        margin: 5% auto;
        max-height: 90vh;
        overflow-y: auto;
    }
    
    /* Form adjustments */
    .form-group {
        margin-bottom: 15px;
    }
    
    .form-group label {
        font-size: 14px;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
        font-size: 16px; /* Prevents zoom on iOS */
        padding: 12px;
    }
    
    /* Button adjustments */
    .btn-primary,
    .btn-secondary,
    .compose-btn {
        padding: 12px 16px;
        font-size: 14px;
        touch-action: manipulation;
    }
    
    /* Voice call modal mobile adjustments */
    .call-modal-content {
        width: 90%;
        padding: 20px;
    }
    
    .call-controls {
        gap: 15px;
    }
    
    .btn-answer,
    .btn-end-call {
        width: 50px;
        height: 50px;
        font-size: 20px;
    }
    
    /* Display screen mobile adjustments */
    .header {
        padding: 15px;
    }
    
    .header h1 {
        font-size: 1.5em;
    }
    
    .counters {
        grid-template-columns: 1fr;
        gap: 15px;
        padding: 10px;
    }
    
    .counter {
        padding: 15px;
    }
    
    .queue-section {
        padding: 15px;
    }
    
    .queue-table {
        font-size: 12px;
    }
    
    .queue-table th,
    .queue-table td {
        padding: 8px 4px;
    }
    
    /* Kiosk mobile adjustments */
    .kiosk-container {
        padding: 10px;
    }
    
    .kiosk-header h1 {
        font-size: 1.8em;
    }
    
    .service-grid {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .service-card {
        padding: 20px;
    }
    
    /* Counter page mobile adjustments */
    .counter-container {
        padding: 10px;
    }
    
    .counter-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
    }
    
    .counter-actions {
        flex-direction: column;
        gap: 10px;
        width: 100%;
    }
    
    .counter-actions button {
        width: 100%;
    }
    
    /* History page mobile adjustments */
    .history-container {
        padding: 10px;
    }
    
    .filters {
        flex-direction: column;
        gap: 10px;
    }
    
    .filter-group {
        width: 100%;
    }
    
    .history-table {
        font-size: 12px;
        overflow-x: auto;
    }
    
    .history-table th,
    .history-table td {
        padding: 8px 4px;
        white-space: nowrap;
    }
    
    /* Users page mobile adjustments */
    .users-container {
        padding: 10px;
    }
    
    .user-card {
        margin-bottom: 15px;
    }
    
    .connected-user-card {
        padding: 15px;
        margin-bottom: 10px;
    }
    
    /* Navigation adjustments */
    .sidebar-nav ul li a {
        padding: 12px 15px;
        font-size: 14px;
    }
    
    .sidebar-nav ul li a .icon {
        margin-right: 8px;
    }
    
    /* Touch-friendly interactions */
    button,
    .btn,
    a {
        min-width: 44px;
        touch-action: manipulation;
    }
    
    /* Prevent horizontal scroll */
    body {
        overflow-x: hidden;
    }
    
    /* Improve text readability */
    body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
}

/* Extra small screens */
@media (max-width: 480px) {
    .main-content {
        padding: 5px;
    }
    
    .content-header h1 {
        font-size: 1.5em;
    }
    
    .modal-content {
        width: 98%;
        margin: 1% auto;
    }
    
    .inbox-container {
        height: calc(100vh - 100px);
    }
    
    .message-list {
        height: 250px;
    }
    
    .counters {
        padding: 5px;
    }
    
    .service-grid {
        gap: 10px;
    }
    
    .service-card {
        padding: 15px;
    }
}

/* Landscape orientation adjustments */
@media (max-width: 768px) and (orientation: landscape) {
    .inbox-container {
        flex-direction: row;
        height: calc(100vh - 80px);
    }
    
    .inbox-sidebar {
        width: 200px;
        border-right: 1px solid #ddd;
        border-bottom: none;
    }
    
    .message-list {
        height: auto;
        border-right: 1px solid #ddd;
        border-bottom: none;
        width: 300px;
    }
    
    .message-view {
        flex: 1;
    }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
    .main-content {
        padding-bottom: env(safe-area-inset-bottom);
    }
    
    .modal-content {
        margin-top: env(safe-area-inset-top);
    }
    
    /* Fix iOS Safari viewport issues */
    body {
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
    }
    
    /* Prevent zoom on input focus */
    input, select, textarea {
        font-size: 16px !important;
    }
    
    /* Fix iOS Safari 100vh issue */
    .admin-container,
    .inbox-container {
        height: -webkit-fill-available;
    }
}

/* Additional iOS fixes */
@media screen and (-webkit-min-device-pixel-ratio: 2) {
    /* High DPI iOS devices */
    .auth-container {
        -webkit-transform: translate(-50%, -50%) scale(0.9);
        transform: translate(-50%, -50%) scale(0.9);
    }
}

/* Force hardware acceleration for smoother scrolling */
* {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
}

/* Improve touch responsiveness */
.btn, button, a, input, select {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
}

input, textarea {
    -webkit-user-select: text;
    user-select: text;
}